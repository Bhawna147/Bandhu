{% extends 'base.html' %}

{% block title %} Bandhu | Edit Profile {% endblock %}

{% block style %}
	<style>
		/* .container {
			max-width: 960px;
		} */

		@media screen and (max-width: 600px) {
			.container{
				width: 85vw;
			}
		}

	</style>
{% endblock %}

{% block content %}

<div class="container">
	<div class="py-3 mt-3 text-center">
		<h2>Edit Profile</h2>
	</div>

	<div class="row justify-content-center mb-5">
		<div class="col-lg-8 border rounded shadow px-5 py-4">

			<form method="POST" enctype="multipart/form-data" class="needs-validation" novalidate>
				{% csrf_token %}
				<div class="row justify-content-center mb-4 ">
				<img src="{{ profile.profile_pic.url }}" alt="profile_pic" class="rounded-circle" style="height: 150px; width: 150px;">
				</div>
				<div class="row justify-content-center">
					<div class="col-md-6 mb-3">
						<label for="firstName">First name</label>
						<input name="first_name" type="text" class="form-control" id="firstName" value="{{ profile.first_name }}" required>
						<div class="invalid-feedback">
							Valid First Name is required.
						</div>
					</div>
					<div class="col-md-6 mb-3">
						<label for="lastName">Last name</label>
						<input name="last_name" type="text" class="form-control" id="lastName" value="{{ profile.last_name }}" required>
						<div class="invalid-feedback">
							Valid Last Name is required.
						</div>
					</div>
				</div>

				<div class="row">
					<div class="col-md-4 mb-3">
						<label for="gender">Gender</label>
						<select name="gender" class="custom-select d-block w-100" id="gender" required>
							<option value="M">Male</option>
							<option value="F">Female</option>
							<option value="O">Other</option>
						</select>
					</div>
					<div class="col-md-4 mb-3">
						<label for="dob">Date of Birth</label>
						<!-- <input type="text" class="form-control" id="firstName" value="" required> -->
						<!-- <input name="dob" type="date" class="form-control" id="dob" required> -->
						<input name="dob" data-date-format="yyyy-mm-dd" id="dob" class="form-control" value="{{ profile.dob|date:'Y-m-d' }}" required>
						<div class="invalid-feedback">
							Plaese enter a valid date.
						</div>
					</div>
					<div class="col-md-4 mb-3">
						<label for="profession">Profession</label>
						<input name="profession" type="text" class="form-control" id="profession" value="{{ profile.profession }}" required>
						<div class="invalid-feedback">
							Valid Contact No. is required.
						</div>
					</div>
				</div>

				<div class="mb3">
					<label for="contactNo">Contact No.</label>
					<input name="contact_no" type="number" class="form-control" id="contactNo" value="{{ profile.contact_no }}" required>
					<div class="invalid-feedback">
						Valid Contact No. is required.
					</div>
				</div>
			
				<div class="mb-3">
					<label for="address">Address</label>
					<input name="street_address1" type="text" class="form-control" id="address" value="{{ profile.street_address1 }}" required>
					<div class="invalid-feedback">
						Please enter your shipping address.
					</div>
				</div>
			
				<div class="mb-3">
					<label for="address2">Address 2 <span class="text-muted">(Optional)</span></label>
					<input name="street_address2" type="text" class="form-control" id="address2" value="{{ profile.street_address2 }}">
				</div>
			
				<div class="row">
					<div class="col-md-5 mb-3">
					<label for="city">City</label>
					<input name="city" type="text" class="form-control" id="city" value="{{ profile.city }}" required>
					<div class="invalid-feedback">
						Please enter a valid city.
					</div>
					</div>
					<div class="col-md-4 mb-3">
					<label for="state">State</label>
					<input name="state" type="text" class="form-control" id="state" value="{{ profile.state }}" required>
					<div class="invalid-feedback">
						Please provide a valid state.
					</div>
					</div>
					<div class="col-md-3 mb-3">
					<label for="pinCode">PIN Code</label>
					<input name="pincode" type="number" class="form-control" id="pinCode" value="{{ profile.pincode }}" required>
					<div class="invalid-feedback">
						PIN code required.
					</div>
					</div>
				</div>

				<hr class="mb-4">
				<div class="row justify-content-center mb-4">
					<div class="col-md-5">
						<button type="submit" class="btn btn-primary btn-lg btn-block" type="submit">Submit</button>
					</div>
				</div>
				
			</form>

		</div>
	</div>	

</div>


{% endblock %}

{% block scripts %}
	<script type="text/javascript">
		(function () {
			'use strict'
			window.addEventListener('load', function () {
				// Fetch all the forms we want to apply custom Bootstrap validation styles to
				var forms = document.getElementsByClassName('needs-validation')

				// Loop over them and prevent submission
				Array.prototype.filter.call(forms, function (form) {
					form.addEventListener('submit', function (event) {
					if (form.checkValidity() === false) {
						event.preventDefault()
						event.stopPropagation()
					}
					form.classList.add('was-validated')
					}, false)
				})
			}, false)
		}())
	</script>

	<!-- Script for Gender Field -->
	<script>
		if("{{ profile.gender }}" == "M") $('#gender option:eq(0)').prop('selected', true)
		else if("{{ profile.gender }}" == "F") $('#gender option:eq(1)').prop('selected', true)
		else $('#gender option:eq(2)').prop('selected', true)
	</script>

	<!-- Script for Date Picker -->
	<script type="text/javascript">
		$('#dob').datepicker({
			weekStart: 1,
			autoclose: true,
			todayHighlight: true,
		});
		// $('#dob').datepicker("setDate", new Date());
	</script>
{% endblock %}
